/*! AdminLTE app.js
 * ================
 * Main JS application file for AdminLTE v2. This file
 * should be included in all pages. It controls some layout
 * options and implements exclusive AdminLTE plugins.
 *
 * @Author  Almsaeed Studio
 * @Support <http://www.almsaeedstudio.com>
 * @Email   <abdullah@almsaeedstudio.com>
 * @version 2.3.7
 * @license MIT <http://opensource.org/licenses/MIT>
 */
function _init(){"use strict";$.AdminLTE.layout={activate:function(){var n=this;n.fix();n.fixSidebar();$(window,".wrapper").resize(function(){n.fix();n.fixSidebar()})},fix:function(){var u=$(".main-header").outerHeight()+$(".main-footer").outerHeight(),n=$(window).height(),i=$(".sidebar").height(),r,t;$("body").hasClass("fixed")?$(".content-wrapper, .right-side").css("min-height",n-$(".main-footer").outerHeight()):(n>=i?($(".content-wrapper, .right-side").css("min-height",n-u),r=n-u):($(".content-wrapper, .right-side").css("min-height",i),r=i),t=$($.AdminLTE.options.controlSidebarOptions.selector),typeof t!="undefined"&&t.height()>r&&$(".content-wrapper, .right-side").css("min-height",t.height()))},fixSidebar:function(){if($("body").hasClass("fixed"))typeof $.fn.slimScroll=="undefined"&&window.console&&window.console.error("Error: the fixed layout requires the slimscroll plugin!");else{typeof $.fn.slimScroll!="undefined"&&$(".sidebar").slimScroll({destroy:!0}).height("auto");return}var n=$(".sidebar").outerHeight()+150,t=$(window).height();n>t?$(".sidebar").slimscroll({height:$(window).height()-$(".main-header").height()+"px",color:"rgba(0,0,0,0.2)",size:"3px"}):typeof $.fn.slimScroll!="undefined"&&$(".sidebar").slimScroll({destroy:!0}).removeAttr("style").height("auto")}};$.AdminLTE.pushMenu={activate:function(n){var t=$.AdminLTE.options.screenSizes;$(document).on("click",n,function(n){n.preventDefault();$(window).width()>t.sm-1?$("body").hasClass("sidebar-collapse")?$("body").removeClass("sidebar-collapse").trigger("expanded.pushMenu"):$("body").addClass("sidebar-collapse").trigger("collapsed.pushMenu"):$("body").hasClass("sidebar-open")?$("body").removeClass("sidebar-open").removeClass("sidebar-collapse").trigger("collapsed.pushMenu"):$("body").addClass("sidebar-open").trigger("expanded.pushMenu")});$(".content-wrapper").click(function(){$(window).width()<=t.sm-1&&$("body").hasClass("sidebar-open")&&$("body").removeClass("sidebar-open")});$.AdminLTE.options.sidebarExpandOnHover||$("body").hasClass("fixed")&&$("body").hasClass("sidebar-mini")},expandOnHover:function(){var n=this,t=$.AdminLTE.options.screenSizes.sm-1;$(".main-sidebar").hover(function(){$("body").hasClass("sidebar-mini")&&$("body").hasClass("sidebar-collapse")&&$(window).width()>t&&n.expand()},function(){$("body").hasClass("sidebar-mini")&&$("body").hasClass("sidebar-expanded-on-hover")&&$(window).width()>t&&n.collapse()})},expand:function(){$("body").removeClass("sidebar-collapse").addClass("sidebar-expanded-on-hover")},collapse:function(){$("body").hasClass("sidebar-expanded-on-hover")&&$("body").removeClass("sidebar-expanded-on-hover").addClass("sidebar-collapse")}};$.AdminLTE.tree=function(n){var r=this,t=$.AdminLTE.options.animationSpeed,i=$(n);i.find('a[href="'+CURRENT_URL+'"]').parent("li").addClass("active");i.find("a").filter(function(){return this.href==CURRENT_URL}).parent("li").addClass("active").parents("ul").addClass("menu-open").slideDown(t,function(){}).parent().addClass("active");$(document).off("click",n+" li a").on("click",n+" li a",function(n){var u=$(this),i=u.next(),f,e,o;i.is(".treeview-menu")&&i.is(":visible")&&!$("body").hasClass("sidebar-collapse")?(i.slideUp(t,function(){i.removeClass("menu-open")}),i.parent("li").removeClass("active")):i.is(".treeview-menu")&&!i.is(":visible")&&(f=u.parents("ul").first(),e=f.find("ul:visible").slideUp(t),e.removeClass("menu-open"),o=u.parent("li"),i.slideDown(t,function(){i.addClass("menu-open");f.find("li.active").removeClass("active");o.addClass("active");r.layout.fix()}));i.is(".treeview-menu")&&n.preventDefault()})};$.AdminLTE.controlSidebar={activate:function(){var t=this,i=$.AdminLTE.options.controlSidebarOptions,n=$(i.selector),u=$(i.toggleBtnSelector),r;u.on("click",function(r){r.preventDefault();n.hasClass("control-sidebar-open")||$("body").hasClass("control-sidebar-open")?t.close(n,i.slide):t.open(n,i.slide)});r=$(".control-sidebar-bg");t._fix(r);$("body").hasClass("fixed")?t._fixForFixed(n):$(".content-wrapper, .right-side").height()<n.height()&&t._fixForContent(n)},open:function(n,t){t?n.addClass("control-sidebar-open"):$("body").addClass("control-sidebar-open")},close:function(n,t){t?n.removeClass("control-sidebar-open"):$("body").removeClass("control-sidebar-open")},_fix:function(n){var t=this;if($("body").hasClass("layout-boxed")){if(n.css("position","absolute"),n.height($(".wrapper").height()),t.hasBindedResize)return;$(window).resize(function(){t._fix(n)});t.hasBindedResize=!0}else n.css({position:"fixed",height:"auto"})},_fixForFixed:function(n){n.css({position:"fixed","max-height":"100%",overflow:"auto","padding-bottom":"50px"})},_fixForContent:function(n){$(".content-wrapper, .right-side").css("min-height",n.height())}};$.AdminLTE.boxWidget={selectors:$.AdminLTE.options.boxWidgetOptions.boxWidgetSelectors,icons:$.AdminLTE.options.boxWidgetOptions.boxWidgetIcons,animationSpeed:$.AdminLTE.options.animationSpeed,activate:function(n){var t=this;n||(n=document);$(n).on("click",t.selectors.collapse,function(n){n.preventDefault();t.collapse($(this))});$(n).on("click",t.selectors.remove,function(n){n.preventDefault();t.remove($(this))})},collapse:function(n){var t=this,i=n.parents(".box").first(),r=i.find("> .box-body, > .box-footer, > form  >.box-body, > form > .box-footer");i.hasClass("collapsed-box")?(n.children(":first").removeClass(t.icons.open).addClass(t.icons.collapse),r.slideDown(t.animationSpeed,function(){i.removeClass("collapsed-box")})):(n.children(":first").removeClass(t.icons.collapse).addClass(t.icons.open),r.slideUp(t.animationSpeed,function(){i.addClass("collapsed-box")}))},remove:function(n){var t=n.parents(".box").first();t.slideUp(this.animationSpeed)}}}function urlify(n){return n.replace(/(https?:\/\/[^\s<"']+)/gi,function(n){return'<a href="'+n+'" class="blue-clr" rel="nofollow" target="_blank">'+n+"<\/a>"})}function wordCount(n){var t=n.match(/\S+/g);return{charactersNoSpaces:n.replace(/\s+/g,"").length,characters:n.length,words:t?t.length:0,lines:n.split(/\r*\n/).length}}function PostAjax(n,t,i){var r=n,u=$.ajax({url:r,type:"POST",dataType:"json",contentType:"application/json",processData:!1,cache:!1,data:t,async:!1,success:function(n){i(n)},error:function(n,t){console.log("ERRORS: "+t)},complete:function(){}})}function loadEditors(){var n=$("textarea.ckeditor");n.length&&n.each(function(){var n=$(this).attr("id"),i=$(this).hasClass("ckeditor-short"),t=CKEDITOR.instances[n];t&&t.destroy(!0);i?CKEDITOR.replace(n,{customConfig:"/Scripts/ckeditor/config-short.js"}):CKEDITOR.replace(n)})}function UnFormatNumber(n){var t=0;return n!=null&&(n=n.toString().replace(/\./g,""),n=(n.match(/,/g)||[]).length>1?n.toString().replace(/,/g,""):n.toString().replace(/,/g,"."),t=Number(n.replace(/[^0-9\.-]+/g,""))),t}function validFromdateToDate(n,t){if(n==undefined||n==null||n==""||t==undefined||t==null||t=="")return!0;var i=new Date(n.split("/")[2]+"-"+n.split("/")[1]+"-"+n.split("/")[0]),r=new Date(t.split("/")[2]+"-"+t.split("/")[1]+"-"+t.split("/")[0]);return i>r?!1:!0}function popupCenter(n,t,i,r){var u=window.top.outerHeight/2+window.top.screenY-r/2,f=window.top.outerWidth/2+window.top.screenX-i/2;return window.open(n,t,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, copyhistory=no, width="+i+", height="+r+", top="+u+", left="+f)}function chooseFile(n,t,i,r){r==undefined&&(r="callBackChoseFile");callback_on_elm=i;scope_elm=n;var u="";u=_fileManagementPath+"?hasdomain=true&fileType=images&function=callBackChoseFile&mode=single&share=share&i="+encodeURIComponent(t);openpreview2(u,900,580)}function callBackChoseFile(n){if(!n||n==null){alert("Không có file nào được chọn!");return}if(/(\.|\/)(gif|jpe?g|png|pdf|rar|zip|doc|docx)$/i.exec(n[0])==null){alert("Tệp bạn chọn không hợp lệ");return}str='angular.element(document.getElementById("'+scope_elm+'")).scope().'+callback_on_elm+'("'+n[0]+'")';eval(str);fmwindow.close()}function openpreview2(n,t,i){var r=0,u=0;parseInt(navigator.appVersion)>=4&&(r=(screen.availWidth-t)*.5,u=(screen.availHeight-i)*.5);fmwindow=window.open(n,"mywindow"+(new Date).getTime(),"scrollbars,resizable=yes,status=yes, width="+t+",height="+i+",left="+r+",top="+u)}var CURRENT_URL,validator,removeUnnecessaryTags,Const,UploadMedia,fmwindow,fmwindow_txtId,_fileManagementPath,scope_elm,callback_on_elm;if(typeof jQuery=="undefined")throw new Error("AdminLTE requires jQuery");$.AdminLTE={};$.AdminLTE.options={navbarMenuSlimscroll:!0,navbarMenuSlimscrollWidth:"3px",navbarMenuHeight:"200px",animationSpeed:500,sidebarToggleSelector:"[data-toggle='offcanvas']",sidebarPushMenu:!0,sidebarSlimScroll:!0,sidebarExpandOnHover:!1,enableBoxRefresh:!0,enableBSToppltip:!0,BSTooltipSelector:"[data-toggle='tooltip']",enableFastclick:!1,enableControlSidebar:!0,controlSidebarOptions:{toggleBtnSelector:"[data-toggle='control-sidebar']",selector:".control-sidebar",slide:!0},enableBoxWidget:!0,boxWidgetOptions:{boxWidgetIcons:{collapse:"fa-minus",open:"fa-plus",remove:"fa-times"},boxWidgetSelectors:{remove:'[data-widget="remove"]',collapse:'[data-widget="collapse"]'}},directChat:{enable:!0,contactToggleSelector:'[data-widget="chat-pane-toggle"]'},colors:{lightBlue:"#135EAC",red:"#f56954",green:"#00a65a",aqua:"#00c0ef",yellow:"#f39c12",blue:"#0073b7",navy:"#001F3F",teal:"#39CCCC",olive:"#3D9970",lime:"#01FF70",orange:"#FF851B",fuchsia:"#F012BE",purple:"#8E24AA",maroon:"#D81B60",black:"#222222",gray:"#d2d6de"},screenSizes:{xs:480,sm:768,md:992,lg:1200}};CURRENT_URL=window.location.href.split("?")[0];$(function(){"use strict";$("body").removeClass("hold-transition");typeof AdminLTEOptions!="undefined"&&$.extend(!0,$.AdminLTE.options,AdminLTEOptions);var n=$.AdminLTE.options;if(_init(),$.AdminLTE.layout.activate(),$.AdminLTE.tree(".sidebar"),n.enableControlSidebar&&$.AdminLTE.controlSidebar.activate(),n.navbarMenuSlimscroll&&typeof $.fn.slimscroll!="undefined"&&$(".navbar .menu").slimscroll({height:n.navbarMenuHeight,alwaysVisible:!1,size:n.navbarMenuSlimscrollWidth}).css("width","100%"),n.sidebarPushMenu&&$.AdminLTE.pushMenu.activate(n.sidebarToggleSelector),n.enableBSToppltip&&$("body").tooltip({selector:n.BSTooltipSelector}),n.enableBoxWidget&&$.AdminLTE.boxWidget.activate(),n.enableFastclick&&typeof FastClick!="undefined"&&FastClick.attach(document.body),n.directChat.enable)$(document).on("click",n.directChat.contactToggleSelector,function(){var n=$(this).parents(".direct-chat").first();n.toggleClass("direct-chat-contacts-open")});$('.btn-group[data-toggle="btn-toggle"]').each(function(){var n=$(this);$(this).find(".btn").on("click",function(t){n.find(".btn.active").removeClass("active");$(this).addClass("active");t.preventDefault()})})}),function(n){"use strict";n.fn.boxRefresh=function(t){function u(n){n.append(r);i.onLoadStart.call(n)}function f(n){n.find(r).remove();i.onLoadDone.call(n)}var i=n.extend({trigger:".refresh-btn",source:"",onLoadStart:function(n){return n},onLoadDone:function(n){return n}},t),r=n('<div class="overlay"><div class="fa fa-refresh fa-spin"><\/div><\/div>');return this.each(function(){if(i.source===""){window.console&&window.console.log("Please specify a source first - boxRefresh()");return}var t=n(this),r=t.find(i.trigger).first();r.on("click",function(n){n.preventDefault();u(t);t.find(".box-body").load(i.source,function(){f(t)})})})}}(jQuery),function(n){"use strict";n.fn.activateBox=function(){n.AdminLTE.boxWidget.activate(this)};n.fn.toggleBox=function(){var t=n(n.AdminLTE.boxWidget.selectors.collapse,this);n.AdminLTE.boxWidget.collapse(t)};n.fn.removeBox=function(){var t=n(n.AdminLTE.boxWidget.selectors.remove,this);n.AdminLTE.boxWidget.remove(t)}}(jQuery),function(n){"use strict";n.fn.todolist=function(t){var i=n.extend({onCheck:function(n){return n},onUncheck:function(n){return n}},t);return this.each(function(){if(typeof n.fn.iCheck!="undefined"){n("input",this).on("ifChecked",function(){var t=n(this).parents("li").first();t.toggleClass("done");i.onCheck.call(t)});n("input",this).on("ifUnchecked",function(){var t=n(this).parents("li").first();t.toggleClass("done");i.onUncheck.call(t)})}else n("input",this).on("change",function(){var t=n(this).parents("li").first();t.toggleClass("done");n("input",t).is(":checked")?i.onCheck.call(t):i.onUncheck.call(t)})})}}(jQuery);validator=function(n){function y(n,t){return n=="tel"&&(s=s||"phone"),n&&n!="password"&&n!="tel"&&n!="search"&&n!="file"||(n="text"),o[n]?o[n](t,!0):!0}function p(t){r=n(t);r.data("valid",!0);r.data("type",r.attr("type"));s=r.attr("pattern")}function d(n){return p(this),n.charCode?y(this.type,this.value):void 0}function w(){if(this.type!="hidden"&&n(this).is(":hidden"))return!0;if(p(this),r.data("val",r[0].value.replace(/^\s+|\s+$/g,"")),t=r.data(),u=i[r.prop("name")]||i.invalid,r[0].nodeName.toLowerCase()==="select"?t.type="select":r[0].nodeName.toLowerCase()==="textarea"&&(t.type="text"),v=t.validateWords||0,e=t.validateLengthRange?(t.validateLengthRange+"").split(","):[1],c=t.validateLength?(t.validateLength+"").split(","):!1,h=t.validateMinmax?(t.validateMinmax+"").split(","):"",t.valid=o.hasValue(t.val),r.hasClass("optional")&&!t.valid&&(t.valid=!0),r[0].type==="checkbox")t.valid=r[0].checked,u=i.checked;else if(t.valid)if(o.sameAsPlaceholder(r)&&(u=i.empty,t.valid=!1),t.validateLinked){var f=t.validateLinked.indexOf("#")==0?n(t.validateLinked):n(":input[name="+t.validateLinked+"]");t.valid=o.linked(t.val,f.val())}else(t.valid||t.type=="select")&&(t.valid=y(t.type,t.val));return t.valid?a(r):(l(r,u),submit=!1),t.valid}function g(t){if(t=n(t),t.length==0)return console.warn("element not found"),!1;var u=this,i=!0,r=t.find(":input").filter("[required=required], .required, .optional").not("[disabled=disabled]");return r.each(function(){i=i*w.apply(this)}),!!i}var i,o,w,l,a,r,h,f,v,e,c,s,u,t,b=/[\(\)\<\>\,\;\:\\\/\"\[\]]/,k=/^.+@.+\..{2,6}$/;return i={invalid:"Dữ liệu không hợp lệ",checked:"Bạn phải check vào ô này",empty:"Bạn không được để trống",min:"input is too short",max:"input is too long",number_min:"too low",number_max:"too high",url:"invalid URL",number:"not a number",email:"email không hợp lệ",email_repeat:"emails không đúng",password_repeat:"mật khẩu không đúng",repeat:"không đúng",complete:"Dữ liệu nhập chưa hoàn thành",select:"Please select an option"},window.console||(console={},console.log=console.warn=function(){return}),f={alerts:!0,classes:{item:"item",alert:"alert",bad:"bad"}},o={sameAsPlaceholder:function(i){return n.fn.placeholder&&i.attr("placeholder")!==undefined&&t.val==i.prop("placeholder")},hasValue:function(n){return n?!0:(u=i.empty,!1)},linked:function(n,r){return r!=n?(u=i[t.type+"_repeat"]||i.no_match,!1):!0},email:function(n){return!k.test(n)||n.match(b)?(u=n?i.email:i.empty,!1):!0},text:function(n,t){var o,h,f,l;if(v)return(o=n.split(" "),h=function(n){for(var t=o.length;t--;)if(o[t].length<n)return!1;return!0},o.length<v||!h(2))?(u=i.complete,!1):!0;if(!t&&e&&n.length<e[0])return u=i.min,!1;if(e&&e[1]&&n.length>e[1])return u=i.max,!1;if(c&&c.length)while(c.length)if(c.pop()==n.length)return u=i.complete,!1;if(s){switch(s){case"alphanumeric":f=/^[a-zA-Z0-9]+$/i;break;case"numeric":f=/^[0-9]+$/i;break;case"phone":f=/^\+?([0-9]|[-|' '])+$/i;break;default:f=s}try{if(l=new RegExp(f).test(n),n&&!l)return!1}catch(a){return console.log(a,r,"regex is invalid"),!1}}return!0},number:function(n){return isNaN(parseFloat(n))&&!isFinite(n)?(u=i.number,!1):e&&n.length<e[0]?(u=i.min,!1):e&&e[1]&&n.length>e[1]?(u=i.max,!1):h[0]&&(n|0)<h[0]?(u=i.number_min,!1):h[1]&&(n|0)>h[1]?(u=i.number_max,!1):!0},date:function(n){var i,t=n.split(/[-./]/g),u;if(r[0].valueAsNumber)return!0;for(u=t.length;u--;)if(isNaN(parseFloat(n))&&!isFinite(n))return!1;try{return(i=new Date(t[2],t[1]-1,t[0]),i.getMonth()+1==t[1]&&i.getDate()==t[0])?i:!1}catch(f){return console.log("date test: ",err),!1}},url:function(n){function t(n){return/^(https?:\/\/)?([\w\d\-_]+\.+[A-Za-z]{2,})+\/?/.test(n)}return t(n)?!0:(u=n?i.url:i.empty,!1)},hidden:function(n){if(e&&n.length<e[0])return u=i.min,!1;if(s){var t;if(s=="alphanumeric"&&(t=/^[a-z0-9]+$/i,!t.test(n)))return!1}return!0},select:function(n){return o.hasValue(n)?!0:(u=i.select,!1)}},l=function(t,i){if(!i||!t||!t.length)return!1;var r=t.closest("."+f.classes.item),u;r.hasClass(f.classes.bad)?f.alerts&&r.find("."+f.classes.alert).html(i):f.alerts&&(u=n('<div class="'+f.classes.alert+'">').html(i),r.append(u));r.removeClass(f.classes.bad);setTimeout(function(){r.addClass(f.classes.bad)},0)},a=function(n){if(!n||!n.length)return console.warn('no "field" argument, null or DOM object not found'),!1;n.closest("."+f.classes.item).removeClass(f.classes.bad).find("."+f.classes.alert).remove()},{defaults:f,checkField:w,keypress:d,checkAll:g,mark:l,unmark:a,message:i,tests:o}}(jQuery);CKEDITOR.config.customConfig="/Scripts/ckeditor/common.js";CKEDITOR.on("instanceReady",function(n){var t=n.editor;t.on("paste",function(n){var t=n.data,i=t.dataValue.replace(/<a[^>]*href=["']([^"']+)["'][^>]*>(((?!<\/a>).)*)<\/a>/ig,function(n,t,i){return'<a href="'+t+'" class="blue-clr" rel="nofollow" target="_blank">'+i+"<\/a>"});i=removeUnnecessaryTags(i);t.dataValue=i;t.type="html"})});removeUnnecessaryTags=function(n){var i;if(n==null||n==="")return"";var f=/(?:\s|\t|\n|\r|&nbsp;)*<\/?(?:(?:p\s+|div|table|tbody|tr|th|td|ul|li|br|h1|h2|a|\??[a-z0-9\-]+\:[a-z0-9\-]+)[^>]*|p)>(?:\s|\t|\n|\r|&nbsp;)*|<\!--[\S\s]*-->/gi,e=/<\/?(?:(?:p\s+|em|u|b|strong|<i\/?>|font|span|\??[a-z0-9\-]+\:[a-z0-9\-]+)[^>]*)>/gi,r=/^(?:\s|\t|\n|\r|&nbsp;|<br\/?>)+|(?:\s|\t|\n|\r|&nbsp;|<br\/?>)+$/gi,u=/<img[^>]+>/gi,o=/^(?:\s|\t|\n|\r|&nbsp;)*<(?:div[^>]*|p\s+[^>]*|p|h\d[^>]*)>/gi,t;if(n=n.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,""),n=n.replace(/(?:<br>|<br >|<br\/>|<br \/>)/gi,"<p>&nbsp;<\/p>"),t=n.split(/(?:\s|\t|\n|\r|&nbsp;)*<\/?(?:p\s+[^>]*|p|div[^>]*)>(?:\s|\t|\n|\r|&nbsp;)*/gi),t&&t.length>1){for(i=0;i<t.length;++i)t[i]=t[i].replace(r,"").trim(),!t[i]||/^(?:(?:\s|\t|\n|\r|&nbsp;)*<\/?(?:span|div|p|br)+[^>]*>(?:\s|\t|\n|\r|&nbsp;)*)+$/gi.test(t[i])?t[i]="":(t[i]=t[i].replace(f," "),t[i]=t[i].replace(e,""),t[i]!==""&&(o.test(t[i])||u.test(t[i])||(t[i]="<p>"+t[i]+"<\/p>"),t[i]=t[i].replace(u,function(n){return'<div class="media_plugin" type="photo" style="text-align:center;"><div>'+n.replace(/style\s*=\s*[\"\'][^\"\']*[\"\']/gi,"")+"<\/div><div><\/div><\/div><p>&nbsp;<\/p>"})));n=t.join("").replace(r,"")}return n};Const=function(){return{message:{invalid:"Dữ liệu không hợp lệ",contentInvalid:"Nội dung không hợp lệ",avartaEmpty:"Bạn chưa chọn ảnh đại diện",listUpdated:"Danh sách đã được cập nhật",itemBanned:"Bài đã được gõ bỏ",checked:"Bạn phải check vào ô này",empty:"Bạn không được để trống",update_succsess:"Dữ liệu cập nhật thành công",update_error:"Cập nhật không thành công!",max:"input is too long",number_min:"too low",number_max:"too high",url:"invalid URL",number:"not a number",password_repeat:"mật khẩu không đúng",repeat:"không đúng",uncomplete:"Dữ liệu nhập chưa hoàn thành",select:"Please select an option"}}}(jQuery);$(document).ready(function(){$(".datepicker-inp").datetimepicker({format:"DD/MM/YYYY HH:mm",locale:"vi",keepOpen:!1});$(".datepicker-short").datetimepicker({format:"DD/MM/YYYY",locale:"vi",keepOpen:!1});loadEditors()});$.fn.isCKEDITOREmpty=function(){var n=$(this).attr("id"),t=CKEDITOR.instances[n].getData().replace("<img","||img").replace("<iframe","||iframe").replace(/<[^>]*>/gi,"").replace(/&nbsp;/g,"").trim().length;return t?!1:!0};$.fn.FormatNumberInt=function(){$(this).on("keyup",function(n){var r,i,u,t;n.keyCode!=37&&n.keyCode!=38&&n.keyCode!=39&&n.keyCode!=40&&(r=/^[0-9]+$/i,i=this.value,i=i.replace(/[^\d.-]+/g,""),this.value="",i+="",u=i.split("."),t=u[0],r.test(t))&&(t.length>1&&(t=parseInt(t.replace(/^0/,"")).toString()),this.value=t)})};$.fn.FormatCurrency=function(){$(this).on("keyup",function(n){var f=/^[0-9]+$/i,i;if(n.keyCode!=37&&n.keyCode!=38&&n.keyCode!=39&&n.keyCode!=40){i=this.value;i=i.replace(/[^\d,-]/g,"");this.value="";i+="";var u=i.split(","),t=u[0],r=u.length>1?","+u[1]:"",e=/(\d+)(\d{3})/;if(f.test(t)&&(r===","||r.replace(/,/g,"")===""||f.test(r.replace(/,/g,"")))){for(t.length>1&&(t=parseInt(t.replace(/^0/,"")).toString());e.test(t);)t=t.replace(e,"$1.$2");this.value=t+r}}})};$.fn.FormatNumberNegativeInt=function(){$(this).on("keyup",function(){var u=/^[0-9\-]+$/i,t;if(event.keyCode!=37&&event.keyCode!=38&&event.keyCode!=39&&event.keyCode!=40){t=this.value;t=t.replace(/[^\d,-]/g,"");this.value="";t+="";var r=t.split(","),n=r[0],i=r.length>1?","+r[1]:"",f=/(\d+)(\d{3})/;if(u.test(n)&&(i===","||i.replace(/,/g,"")===""||u.test(i.replace(/,/g,"")))){for(n.length>1&&(n=parseInt(n.replace(/^0/,"")).toString());f.test(n);)n=n.replace(f,"$1.$2");this.value=n+i}}})};UploadMedia={IdInputFile:"",ListFile:[],IsDisPlayFileInfo:!1,IsUpdate:!1,ResponseResult:"",OpenFileDialog:function(n){UploadMedia.IdInputFile=n;$("#"+n).click()},Upload:function(n,t,i,r){var u=document.getElementById(UploadMedia.IdInputFile).files,o=$("#file-upload-box"),e,f;$("#message-box").hide();u.length>0&&(e=window.URL||window.webkitURL,f=new Image,f.src=e.createObjectURL(u[0]),f.onload=function(){(this.width<1300||this.height<400)&&alert("Ảnh bạn tải lên quá nhỏ, ảnh tối thiểu phải rộng 1300px và cao tối thiểu 400px")},UploadMedia.HandleUpload(u,o,n,t,i,r))},HandleUpload:function(n,t,i,r,u,f){for(var e,s,o=0;o<n.length;o++)e=new FormData,e.append("id","TTR"),e.append("fileToUpload",n[o]),e.append("project","NguyenDu"),e.append("UploadType","upload"),e.append("StringDecypt",i),e.append("submit","Upload Image"),s=new UploadMedia.CreateStatusbar(t),s.setFileNameSize(n[o].name,n[o].size),UploadMedia.SendAvatarToServer(e,s,r,function(n){n&&n.length>0&&(UploadMedia.ListFile.push(n),this.deleteFile=$("<div class='button-delete-upload'><i onclick=\"UploadMedia.DeleteUploadFile('"+n+"', this)\" class='fa fa-trash-o'><\/i><\/div>").appendTo(s.statusbar),UploadMedia.IsUpdate&&UploadMedia.UploadToServer(u,UploadMedia.ListFile[UploadMedia.ListFile.length-1],f))})},CreateStatusbar:function(n){this.statusbar=UploadMedia.IsDisPlayFileInfo?$("<div class='statusbar'><\/div>").appendTo(n):$("<div class='statusbar hidden'><\/div>").appendTo(n);this.filename=$("<div class='filename'><\/div>").appendTo(this.statusbar);this.size=$("<div class='filesize'><\/div>").appendTo(this.statusbar);this.progressBar=$("<div class='progressBar'><div><\/div><\/div>").appendTo(this.statusbar);this.setFileNameSize=function(n,t){var i="",r=t/1024,u;parseInt(r)>1024?(u=r/1024,i=u.toFixed(2)+" MB"):i=r.toFixed(2)+" KB";this.filename.html(n);this.size.html(i)};this.setProgress=function(n){var t=n*this.progressBar.width()/100;this.progressBar.find("div").animate({width:t},10).html(n+"% ");n==100&&this.progressBar.hide()};this.hideProgressbar=function(){this.statusbar.remove()}},SendAvatarToServer:function(n,t,i,r){var u=i+"/UploadHandler.php",f=$.ajax({xhr:function(){var n=$.ajaxSettings.xhr();return n.upload&&n.upload.addEventListener("progress",function(n){var i=0,r=n.loaded||n.position,u=n.total;n.lengthComputable&&(i=Math.ceil(r/u*100));t.setProgress(i)},!1),n},url:u,type:"POST",contentType:!1,processData:!1,cache:!1,data:n,success:function(n){var t=JSON.parse(n),i=t.OK;r(i)},error:function(n,t){console.log("ERRORS: "+t)},complete:function(){t.setProgress(100);UploadMedia.RefreshControl("#"+UploadMedia.IdInputFile)}})},UploadToServer:function(n,t,i){var r=JSON.stringify({avatar:t});UploadMedia.ResponseResult=t;PostAjaxExtention(n,r,null,function(n){n.Success?$("#"+i).attr("src",t):alert(n.Message)})},RefreshControl:function(n){var t=$(n);t.replaceWith(t.val("").clone(!0))},DeleteUploadFile:function(n,t){if(n!=null&&n!=""&&UploadMedia.ListFile.length>0){var i=UploadMedia.ListFile.indexOf(n);UploadMedia.ListFile[i]!=null&&(UploadMedia.ListFile.splice(i,1),$(t).parent().parent().remove())}}};_fileManagementPath="/FileManagement_5_1_09/";